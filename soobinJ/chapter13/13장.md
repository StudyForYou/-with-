# 13장 타입스크립트와 객체 지향

## 13.1 타입스크립트의 객체 지향

- 자바스크립트는 전통적인 객체 지향 프로그래밍 언어에서 기대할 수 있는 일부 기능을 지원하지 않아 객체 지향을 온전히 구현하는데 부족함이 있음
- 타입스크립트가 privat과 같은 접근 제어자나 추상 클래스, 추상 메서드 같은 기능을 지원하면서 해결해줌
- 타입스크립트는 객체 지향을 구현할 수 있도록 도와주는 자바스크립트의 슈퍼셋으로 볼 수 있음
- 타입스크립트는 점진적 타이핑, 구조적 타이핑, 덕 타이핑이 결합한 언어
  - 점진적 타이핑: 프로그램 전체가 아닌 개발자가 명시한 일부분만 정적 타입 검사를 거치게 하고 나머지 부분은 그대로 동적 타입 검사가 이루어지게 하여 점진적 개선을 할 수 있도록 해줌
  - 덕 타이핑: 객체의 변수와 메서드 집합이 객체의 타입을 결정하게 해줌
  - 구조적 타이핑
    - 구조적 타입 시스템이라고도 부름
    - 명시적인 선언이나 이름에 의존하여 명확한 상속 관계를 지향하는 노미널 타이핑과 달리, 객체의 속성에 해당하는 특정 타입의 속성을 갖는지를 검사하여 타입 호환성을 결정함
- 노미널 타이핑
  - 자바, c# 등
  - 인터페이스와 클래스가 일대일로 대응됨
- 구조적 타이핑 언어는 하나의 클래스에 여러 인터페이스가 연결될 수 있으며, 하나의 인터페이스에 여러 클래스가 연결될 수도 있음
- 타입스크립트를 활용해 프론트엔드에서 객체 지향을 구현할 수 있음
  - 컴포넌트도 객체의 한 형태
  - 컴포넌트는 스스로 책임을 져야하는 역할을 수행하면서 다른 컴포넌트 객체와 협력하는 독립적인 객체
  - 컴포넌트를 조합하는 것도 객체 지향을 활용하는 것
- 객체 지향의 관점에서 타입스크립트가 프론트엔드에 주는 이점
  - 타입스크립트는 prop을 인터페이스로 정의할 수 있음
  - 객체 지향 패러다임에서는 객체 간의 협력 관계에 초점을 둠
  - 컴포넌트 간의 협력 관계를 표현하는 것이 prop
  - 객체 자체가 아니라 프레임워크에 의해 객체의 의존성이 주입되는 DI패턴을 따르는데, 이러한 패턴을 더욱 명확하게 표현할 수 있게 해줌
- 웹 개발을 하면서 제대로 된 객체 지향을 구현하기 어려운 이유
  - 선언적인 언어 또는 문법을 사용할 때가 있기 때문
  - JSX와 같은 선언적인 문법을 사용하여 마크업을 처리 -> 컴포넌트 간의 관계를 먼저 떠올리기 어려움
  - 디자인 요구 사항이 제시되어야 그에 맞춰 마크업을 진행할 수 밖에 없음
  - 컴포넌트 간의 협력 관계를 먼저 고려하고 메시지를 정하는 것이 현실적으로 어려움
  - 변동 사항에 유연하게 대응하기 위해 (변경 용이, 유지보수성이 높은 설계를 하기 위해) 객체 지향을 구현하는데 사전에 레이아웃의 변화를 예측할 수 없음 -> 변경 사항이 생기면 받아들일 뿐
- 어떻게 객체 지향을 효과적으로 활용할 수 있는가?
  - 레이아웃은 예상치 못한 변동 사항이 생길 가능성이 높기 때문에 미확정 영역으로 두고
  - 공통으로 사용되는 컴포넌트와 비즈니스 영역에서 객체 지향 원칙을 적용하여 설계하면 좋은 구조를 개발할 수 있을 것임

## 13.2 우아아한형제들의 활용 방식

- 우아한형제들의 설계 방식
  - 온전히 레이아웃만 담당하는 컴포넌트 영역
  - 컴포넌트 영역 위에서 레이아웃과 비즈니스 로직을 연결해주는 커스텀 훅 영역
  - 훅 영역 위에서 객체로서 상호 협력하는 모델 영역
  - 모델 영역 위에서 API를 해석하여 모델로 전달하는 API 레이어 영역

### 1. 컴포넌트 영역

- `components/CartCloseoutDialog.tsx`
- 온전히 레이아웃 영역만 담당
- 비즈니스 로직은 useCartStore 내부 어딘가에 존재

### 2. 커스텀 훅 영역

- `stroe/cart.ts`
- 전역 상태를 관리하는 스토어 내의 useCartStore
- 해당 스토어 객체에서 최종적으로 사용되는 setupContext는 컨텍스트와 관련된 훅을 다루는 유틸리티 함수이기 때문에 훅 영역의 로직으로 봐도 됨
- 장바구니 상품을 담는 비즈니스 로직을 레이아웃과 연결해주기 위한 커스텀 훅 영역

### 3. 모델 영역

- `models/Cart.ts`
- 다른 컴포넌트 및 모델 객체와 함께 협력

### 4. API 레이어 영역

- `apis/Cart.ts`
- 훅에서 실제로 실행되는 addToCart 함수

## 13.3 캡슐화와 추상화

- 추상화
  - 객체들을 모델링하는 과정 자체
  - 객체들을 좀 더 사람이 인지할 수 있도록 적합한 설계를 하는 것이 곧 추상화
- 캡슐화
  - 다른 객체 내부의 데이터를 꺼내와서 직접 다루지 않고, 해당 객체에서 처리할 행위를 따로 요청함으로써 협력하는 것
  - 컴포넌트의 내부 데이터인 상태가 바로 캡슐화의 대상
  - 컴포넌트 내의 상태와 prop을 잘 다루는 것도 캡슐화의 개념에 부합하는 것
  - prop drilling이 심할수록 컴포넌트 간의 결합도는 높아지며 내부 처리 로직이 외부로 드러나기 마련 -> 좋지 못한 관계를 형성하고 캡슐화를 저해 -> 이를 해결하기 위해 옵저버 패턴 등장 -> 상태 관리 라이브러리 생겨남
- 적절하게 캡슐화되고 추상화된 컴포넌트를 활용하면 애플리케이션을 더 유기적으로 구성할 수 있음
- 최종적인 우리의 지향점은 객체들이 유기적으로 협력하게끔 해서 올바르게 도메인을 분리하는 것

## 13.4 정리

- 이미 객체 지향을 구현하고 있음...!
- 함수, 클래스, 모듈을 분리하는 것도 객체 지향 프로그래밍의 일부
- 설계 방식도 트레이드오프
  - ex) 한 달 동안 사용할 광고 페이지를 만들어야 한다면 단지 동작만 하도록 빨리 코드를 작성하는 게 생산성 측면에서 나을 수도
- 현실 세계를 잘 반영하고 좋은 추상화를 어떻게 만들지 고민하며 개발한다면 변경에 유연하고 유지보수하기 쉬운 설계를 구축할 수 있을 것임
